# Notification System Flow Diagram

## Overview

This document visualizes how actionable notifications work in the system.

## Notification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Action Triggers                          â”‚
â”‚                                                                       â”‚
â”‚  â€¢ Student submits draft                                            â”‚
â”‚  â€¢ Staff approves/rejects draft                                     â”‚
â”‚  â€¢ Admin publishes student profile                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend Notification Creation                     â”‚
â”‚                                                                       â”‚
â”‚  NotificationService.create({                                       â”‚
â”‚    user_id: targetUser.id,                                          â”‚
â”‚    user_role: 'staff'|'admin'|'student'|'recruiter',               â”‚
â”‚    type: 'draft_submitted'|'approved'|'etc',                       â”‚
â”‚    message: localizedMessage,                                       â”‚
â”‚    status: 'unread',                                                â”‚
â”‚    related_id: draft.id | student.id,                              â”‚
â”‚    target_url: buildNotificationUrl({ ... })  â—„â”€â”€â”€ NEW!            â”‚
â”‚  })                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   buildNotificationUrl Logic                         â”‚
â”‚                                                                       â”‚
â”‚  Input: { type, userRole, studentId, relatedId }                   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  if (type === 'draft_submitted' && userRole === 'staff')     â”‚  â”‚
â”‚  â”‚    â†’ /checkprofile/profile/{studentId}/top                   â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  if (type === 'approved' && userRole === 'admin')            â”‚  â”‚
â”‚  â”‚    â†’ /checkprofile/profile/{studentId}/top                   â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  if (type === 'approved' && userRole === 'student')          â”‚  â”‚
â”‚  â”‚    â†’ /profile/top                                             â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  if (type === 'etc' && userRole === 'recruiter')             â”‚  â”‚
â”‚  â”‚    â†’ /student/profile/{studentId}/top                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Database: Notifications Table                     â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ id â”‚ user_id  â”‚ user_roleâ”‚   type   â”‚  message â”‚  target_url â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1  â”‚  456     â”‚  staff   â”‚ draft_.. â”‚ Student..â”‚ /checkprof..â”‚  â”‚
â”‚  â”‚ 2  â”‚  789     â”‚  admin   â”‚ approved â”‚ Student..â”‚ /checkprof..â”‚  â”‚
â”‚  â”‚ 3  â”‚  123     â”‚  student â”‚ approved â”‚ Your pr..â”‚ /profile/topâ”‚  â”‚
â”‚  â”‚ 4  â”‚  101     â”‚ recruiterâ”‚   etc    â”‚ Student..â”‚ /student/pr.â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Frontend: User Receives Notification                 â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Notification Bell Icon                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚  â”‚
â”‚  â”‚  â”‚    ğŸ””    â”‚  â† Badge shows unread count                    â”‚  â”‚
â”‚  â”‚  â”‚    (3)   â”‚                                                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  User clicks â†’ Dropdown appears                              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Notifications                    [Mark all as read]    â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚  â”‚  â”‚  [All] [Unread] [Read]                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚  â”‚  â”‚  â–º Student 123 submitted profile     [NEW]  10:30 AM   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â–º Draft approved by staff           [NEW]  09:15 AM   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    Profile update completed                  Yesterday â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend: handleClick Function (NEW LOGIC)              â”‚
â”‚                                                                       â”‚
â”‚  const handleClick = item => {                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚  if (item.target_url) {              â—„â”€â”€â”€ NEW CONDITION â”‚    â”‚
â”‚    â”‚    markAsRead(item.id)                                   â”‚    â”‚
â”‚    â”‚    setIsVisible(false)                                   â”‚    â”‚
â”‚    â”‚    setModalIsVisible(false)                              â”‚    â”‚
â”‚    â”‚    navigate(item.target_url)         â—„â”€â”€â”€ NAVIGATION    â”‚    â”‚
â”‚    â”‚    return                                                 â”‚    â”‚
â”‚    â”‚  }                                                        â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚  // Otherwise, show modal (backward compatible)          â”‚    â”‚
â”‚    â”‚  setSelectedMessage(item)                                â”‚    â”‚
â”‚    â”‚  setModalIsVisible(true)                                 â”‚    â”‚
â”‚    â”‚  markAsRead(item.id)                                     â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  }                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User Navigated To:                           â”‚
â”‚                                                                       â”‚
â”‚  â€¢ Staff â†’ /checkprofile/profile/123/top                           â”‚
â”‚    â””â”€ Can review student's pending draft                           â”‚
â”‚                                                                       â”‚
â”‚  â€¢ Admin â†’ /checkprofile/profile/123/top                           â”‚
â”‚    â””â”€ Can see approved student profile                             â”‚
â”‚                                                                       â”‚
â”‚  â€¢ Student â†’ /profile/top                                           â”‚
â”‚    â””â”€ Can view their updated profile                               â”‚
â”‚                                                                       â”‚
â”‚  â€¢ Recruiter â†’ /student/profile/123/top                            â”‚
â”‚    â””â”€ Can browse newly published student profile                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Example Scenarios

### Scenario 1: Draft Submission Flow

```
Student (ID: 123) submits draft
         â”‚
         â–¼
Backend creates notification for all staff members
  - type: 'draft_submitted'
  - user_role: 'staff'
  - target_url: '/checkprofile/profile/123/top'
         â”‚
         â–¼
Staff member (ID: 456) logs in
         â”‚
         â–¼
Sees notification: "Student 123 submitted profile"
         â”‚
         â–¼
Clicks notification
         â”‚
         â–¼
Frontend navigates to: /checkprofile/profile/123/top
         â”‚
         â–¼
Staff can immediately review the draft
```

### Scenario 2: Approval Flow

```
Staff approves Student 123's draft
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                         â–¼                    â–¼
   To Student               To Admin             To Admin
   type: 'approved'        type: 'approved'     type: 'approved'
   user_role: 'student'    user_role: 'admin'   user_role: 'admin'
   target_url:             target_url:          target_url:
   '/profile/top'          '/checkprofile/      '/checkprofile/
                           profile/123/top'     profile/123/top'
         â”‚                         â”‚                    â”‚
         â–¼                         â–¼                    â–¼
   Student clicks           Admin clicks           Admin clicks
   â†’ Their profile          â†’ Review page          â†’ Review page
```

### Scenario 3: Profile Publication Flow

```
Admin makes Student 123's profile public
         â”‚
         â–¼
Backend creates notifications for all recruiters
  - type: 'etc'
  - user_role: 'recruiter'
  - target_url: '/student/profile/123/top'
         â”‚
         â–¼
Recruiter (ID: 101) logs in
         â”‚
         â–¼
Sees notification: "Student 123 profile published"
         â”‚
         â–¼
Clicks notification
         â”‚
         â–¼
Frontend navigates to: /student/profile/123/top
         â”‚
         â–¼
Recruiter can view student's public profile
```

## Key Benefits

1. **One-Click Access**: Users reach relevant context immediately
2. **Reduced Friction**: No manual navigation or searching required
3. **Context Awareness**: Different user roles see appropriate URLs
4. **Backward Compatible**: Old notifications still work
5. **Centralized Logic**: Easy to maintain and extend

## Implementation Summary

```
Backend (4 files changed)
â”œâ”€â”€ Migration: Add target_url column
â”œâ”€â”€ Model: Update Notification definition
â”œâ”€â”€ Utility: buildNotificationUrl()
â””â”€â”€ Controllers: Include target_url in all notifications

Frontend (1 file changed)
â””â”€â”€ Notifications.jsx: Navigate on click if target_url exists
```

## URL Mapping Reference

| Notification Type | User Role   | Target URL                              | Use Case                      |
| ----------------- | ----------- | --------------------------------------- | ----------------------------- |
| `draft_submitted` | `staff`     | `/checkprofile/profile/{studentId}/top` | Review pending student draft  |
| `approved`        | `admin`     | `/checkprofile/profile/{studentId}/top` | View approved student profile |
| `approved`        | `student`   | `/profile/top`                          | View own updated profile      |
| `etc` (published) | `recruiter` | `/student/profile/{studentId}/top`      | Browse newly public student   |

## Notes

- Notifications without `target_url` (old or special cases) still show modal
- Navigation happens after marking as read
- Dropdown and modal close automatically on navigation
- Works across all languages (multilingual message format preserved)
